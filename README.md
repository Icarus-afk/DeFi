high-level design and architecture:

Features and Functionalities:

    Lenders:
        Lenders can deposit Ether (ETH) or ERC-20 tokens into a lending pool.
        They earn interest on their deposited assets based on the lending interest rate.
    Borrowers:
        Borrowers can take out loans by providing collateral (ETH or ERC-20 tokens) and paying a borrowing interest rate.
        The collateral ratio (collateral value / loan value) must be maintained above a certain threshold to avoid liquidation.
    Lending Pools:
        Separate lending pools for each asset (ETH, DAI, USDC, etc.).
        Lenders deposit assets into these pools, and borrowers take loans from them.
    Interest Rates:
        Dynamic interest rates based on the utilization ratio (total borrowed / total supplied) of each lending pool.
        Higher utilization leads to higher interest rates for borrowers and lenders.
    Collateral Management:
        Borrowers can deposit and withdraw collateral assets.
        Collateral value is constantly monitored, and positions are liquidated if the collateral ratio falls below the threshold.
    Liquidation:
        When a borrower's position becomes undercollateralized, it can be liquidated by other users.
        Liquidators receive a bonus for providing this service and helping maintain the protocol's health.
[![](https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggTFJcbiAgICBzdWJncmFwaCBcIkZyb250LWVuZCBJbnRlcmZhY2VcIlxuICAgICAgICBMZW5kZXIoXCJMZW5kZXI8YnI-LSBEZXBvc2l0IEFzc2V0czxicj4tIEVhcm4gSW50ZXJlc3RcIilcbiAgICAgICAgQm9ycm93ZXIoXCJCb3Jyb3dlcjxicj4tIFRha2UgT3V0IExvYW5zPGJyPi0gUHJvdmlkZSBDb2xsYXRlcmFsXCIpXG4gICAgICAgIExpcXVpZGF0b3IoXCJMaXF1aWRhdG9yPGJyPi0gTGlxdWlkYXRlIFVuZGVyY29sbGF0ZXJhbGl6ZWQgUG9zaXRpb25zXCIpXG4gICAgZW5kXG5cbiAgICBzdWJncmFwaCBcIlNtYXJ0IENvbnRyYWN0IExheWVyXCJcbiAgICAgICAgTGVuZGluZ1Bvb2woXCJMZW5kaW5nUG9vbDxicj4tIERlcG9zaXQvV2l0aGRyYXc8YnI-LSBCb3Jyb3cvUmVwYXk8YnI-LSBMaXF1aWRhdGVcIilcbiAgICAgICAgSW50ZXJlc3RSYXRlTW9kZWwoXCJJbnRlcmVzdFJhdGVNb2RlbDxicj4tIENhbGN1bGF0ZSBJbnRlcmVzdCBSYXRlczxicj4tIFV0aWxpemF0aW9uIFJhdGlvXCIpXG4gICAgICAgIENvbGxhdGVyYWxNYW5hZ2VyKFwiQ29sbGF0ZXJhbE1hbmFnZXI8YnI-LSBNYW5hZ2UgQ29sbGF0ZXJhbDxicj4tIE1vbml0b3IgQ29sbGF0ZXJhbCBSYXRpb1wiKVxuICAgICAgICBMaXF1aWRhdGlvbk1hbmFnZXIoXCJMaXF1aWRhdGlvbk1hbmFnZXI8YnI-LSBMaXF1aWRhdGUgUG9zaXRpb25zPGJyPi0gQm9udXNcIilcbiAgICAgICAgUHJpY2VPcmFjbGUoXCJQcmljZU9yYWNsZTxicj4tIEZldGNoIEFzc2V0IFByaWNlc1wiKVxuICAgICAgICBEQUkoXCJFUkMyMFRva2VuIChEQUkpPGJyPi0gTWludC9CdXJuPGJyPi0gVHJhbnNmZXJcIilcbiAgICAgICAgVVNEQyhcIkVSQzIwVG9rZW4gKFVTREMpPGJyPi0gTWludC9CdXJuPGJyPi0gVHJhbnNmZXJcIilcblxuICAgICAgICBMZW5kaW5nUG9vbCAtLS0-IEludGVyZXN0UmF0ZU1vZGVsXG4gICAgICAgIExlbmRpbmdQb29sIC0tLT4gQ29sbGF0ZXJhbE1hbmFnZXJcbiAgICAgICAgTGVuZGluZ1Bvb2wgLS0tPiBMaXF1aWRhdGlvbk1hbmFnZXJcbiAgICAgICAgTGVuZGluZ1Bvb2wgLS0tPiBEQUlcbiAgICAgICAgTGVuZGluZ1Bvb2wgLS0tPiBVU0RDXG5cbiAgICAgICAgQ29sbGF0ZXJhbE1hbmFnZXIgLS0tPiBQcmljZU9yYWNsZVxuICAgICAgICBMaXF1aWRhdGlvbk1hbmFnZXIgLS0tPiBQcmljZU9yYWNsZVxuICAgIGVuZFxuXG4gICAgTGVuZGVyIC0tLT4gTGVuZGluZ1Bvb2xcbiAgICBCb3Jyb3dlciAtLS0-IExlbmRpbmdQb29sXG4gICAgTGlxdWlkYXRvciAtLS0-IExlbmRpbmdQb29sXG4gICAgTGVuZGVyIC0tLT4gSW50ZXJlc3RSYXRlTW9kZWxcbiAgICBCb3Jyb3dlciAtLS0-IENvbGxhdGVyYWxNYW5hZ2VyXG4gICAgTGlxdWlkYXRvciAtLS0-IExpcXVpZGF0aW9uTWFuYWdlciIsIm1lcm1haWQiOnsidGhlbWUiOiJkYXJrIn0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)](https://workflow.jace.pro/#/edit/eyJjb2RlIjoiZ3JhcGggTFJcbiAgICBzdWJncmFwaCBcIkZyb250LWVuZCBJbnRlcmZhY2VcIlxuICAgICAgICBMZW5kZXIoXCJMZW5kZXI8YnI-LSBEZXBvc2l0IEFzc2V0czxicj4tIEVhcm4gSW50ZXJlc3RcIilcbiAgICAgICAgQm9ycm93ZXIoXCJCb3Jyb3dlcjxicj4tIFRha2UgT3V0IExvYW5zPGJyPi0gUHJvdmlkZSBDb2xsYXRlcmFsXCIpXG4gICAgICAgIExpcXVpZGF0b3IoXCJMaXF1aWRhdG9yPGJyPi0gTGlxdWlkYXRlIFVuZGVyY29sbGF0ZXJhbGl6ZWQgUG9zaXRpb25zXCIpXG4gICAgZW5kXG5cbiAgICBzdWJncmFwaCBcIlNtYXJ0IENvbnRyYWN0IExheWVyXCJcbiAgICAgICAgTGVuZGluZ1Bvb2woXCJMZW5kaW5nUG9vbDxicj4tIERlcG9zaXQvV2l0aGRyYXc8YnI-LSBCb3Jyb3cvUmVwYXk8YnI-LSBMaXF1aWRhdGVcIilcbiAgICAgICAgSW50ZXJlc3RSYXRlTW9kZWwoXCJJbnRlcmVzdFJhdGVNb2RlbDxicj4tIENhbGN1bGF0ZSBJbnRlcmVzdCBSYXRlczxicj4tIFV0aWxpemF0aW9uIFJhdGlvXCIpXG4gICAgICAgIENvbGxhdGVyYWxNYW5hZ2VyKFwiQ29sbGF0ZXJhbE1hbmFnZXI8YnI-LSBNYW5hZ2UgQ29sbGF0ZXJhbDxicj4tIE1vbml0b3IgQ29sbGF0ZXJhbCBSYXRpb1wiKVxuICAgICAgICBMaXF1aWRhdGlvbk1hbmFnZXIoXCJMaXF1aWRhdGlvbk1hbmFnZXI8YnI-LSBMaXF1aWRhdGUgUG9zaXRpb25zPGJyPi0gQm9udXNcIilcbiAgICAgICAgUHJpY2VPcmFjbGUoXCJQcmljZU9yYWNsZTxicj4tIEZldGNoIEFzc2V0IFByaWNlc1wiKVxuICAgICAgICBEQUkoXCJFUkMyMFRva2VuIChEQUkpPGJyPi0gTWludC9CdXJuPGJyPi0gVHJhbnNmZXJcIilcbiAgICAgICAgVVNEQyhcIkVSQzIwVG9rZW4gKFVTREMpPGJyPi0gTWludC9CdXJuPGJyPi0gVHJhbnNmZXJcIilcblxuICAgICAgICBMZW5kaW5nUG9vbCAtLS0-IEludGVyZXN0UmF0ZU1vZGVsXG4gICAgICAgIExlbmRpbmdQb29sIC0tLT4gQ29sbGF0ZXJhbE1hbmFnZXJcbiAgICAgICAgTGVuZGluZ1Bvb2wgLS0tPiBMaXF1aWRhdGlvbk1hbmFnZXJcbiAgICAgICAgTGVuZGluZ1Bvb2wgLS0tPiBEQUlcbiAgICAgICAgTGVuZGluZ1Bvb2wgLS0tPiBVU0RDXG5cbiAgICAgICAgQ29sbGF0ZXJhbE1hbmFnZXIgLS0tPiBQcmljZU9yYWNsZVxuICAgICAgICBMaXF1aWRhdGlvbk1hbmFnZXIgLS0tPiBQcmljZU9yYWNsZVxuICAgIGVuZFxuXG4gICAgTGVuZGVyIC0tLT4gTGVuZGluZ1Bvb2xcbiAgICBCb3Jyb3dlciAtLS0-IExlbmRpbmdQb29sXG4gICAgTGlxdWlkYXRvciAtLS0-IExlbmRpbmdQb29sXG4gICAgTGVuZGVyIC0tLT4gSW50ZXJlc3RSYXRlTW9kZWxcbiAgICBCb3Jyb3dlciAtLS0-IENvbGxhdGVyYWxNYW5hZ2VyXG4gICAgTGlxdWlkYXRvciAtLS0-IExpcXVpZGF0aW9uTWFuYWdlciIsIm1lcm1haWQiOnsidGhlbWUiOiJkYXJrIn0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)


